import{a as Q}from"./chunk-HDV3YJ36.js";import{a as K}from"./chunk-EMU2OSP3.js";import{a as J}from"./chunk-5BRKJRO7.js";import{a as j}from"./chunk-AURWLOYF.js";import{b as H}from"./chunk-4W2HTQRK.js";import{a as U,b as B,g as z}from"./chunk-QETYXY27.js";import"./chunk-VD6TYLA4.js";import{a as G,e as q}from"./chunk-VZ4HLSKR.js";import"./chunk-YW5HVEMI.js";import"./chunk-DCFEK5NY.js";import"./chunk-GDYXRNEI.js";import"./chunk-YINHOYAG.js";import{a as R,b as I}from"./chunk-7T747AWH.js";import{a as v}from"./chunk-ZWL73D3D.js";import{c as S,d as y}from"./chunk-IE527E7W.js";import{f as V,h as E,j as L,k as O,l as k,n as C,o as N,q as A,s as D,y as T}from"./chunk-JHSZ4YJF.js";import"./chunk-Y6UWJUYI.js";import{Db as c,Fb as p,Ia as P,Kb as f,Pb as a,Pc as b,Qb as o,Rb as u,_b as M,ac as g,ib as s,jb as d,mc as m,nc as h,ra as x,yc as _,zc as F}from"./chunk-XM6RWNSX.js";var W=(t,n)=>l=>{let e=l.get(t),r=l.get(n);if(r.errors&&!r.errors?.confirmedValidator)return null;if(e.value!==r.value){let i={confirmedValidator:"Passwords do not match"};return r.setErrors(i),i}return r.setErrors(null),null};var X=t=>["/",t];function Y(t,n){if(t&1&&(a(0,"mat-error"),m(1),o()),t&2){let l=g();s(),h(l.getEmailErrorMessage())}}function Z(t,n){if(t&1&&(a(0,"mat-error"),m(1),o()),t&2){let l=g();s(),h(l.getPasswordErrorMessage())}}function $(t,n){if(t&1&&(a(0,"mat-error"),m(1),o()),t&2){let l=g();s(),h(l.getConfirmPasswordErrorMessage())}}var Ct=(()=>{let n=class n{constructor(e,r,i,w){this.authService=e,this.router=r,this.destroyRef=i,this.cdr=w,this.linkLogin=v.Login,this.registrationForm=new k({email:new C("",[E.required,K()]),password:new C("",[E.required,Q(8,225)]),confirmPassword:new C("",[])},{validators:W("password","confirmPassword")})}onRegistration(){if(this.registrationForm.valid){let{email:e,password:r}=this.registrationForm.value;this.authService.registration({email:e,password:r}).pipe(J(this.destroyRef)).subscribe(()=>this.router.navigate([v.Login]),i=>{this.registrationForm.get("email")?.setErrors({alreadyExists:i.message}),this.cdr.detectChanges()})}else this.registrationForm.markAllAsTouched()}getEmailErrorMessage(){let e=this.registrationForm.get("email");return e.hasError("required")?"Please enter an email":e.hasError("invalidEmail")?"Incorrect email":e.hasError("email")?"The email is invalid":e.hasError("alreadyExists")?"Account with this email already exists":""}getPasswordErrorMessage(){let e=this.registrationForm.get("password");return e.hasError("required")?"Please enter a password":e.hasError("minlength")?"Password must be at least 8 characters long":""}getConfirmPasswordErrorMessage(){return this.registrationForm.get("confirmPassword").hasError("confirmedValidator")?"Passwords do not match":""}};n.\u0275fac=function(r){return new(r||n)(d(j),d(S),d(P),d(b))},n.\u0275cmp=x({type:n,selectors:[["app-registration"]],standalone:!0,features:[_],decls:25,vars:8,consts:[[1,"card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","placeholder","email","formControlName","email","name","email","type","email"],["matInput","","placeholder","password","formControlName","password","name","password","type","password"],["matInput","","placeholder","confirm password","formControlName","confirmPassword","name","confirmPassword","type","password"],[1,"card-actions"],["type","submit","mat-flat-button","",1,"btn",3,"disabled"],["mat-button","",1,"btn",3,"routerLink"]],template:function(r,i){r&1&&(a(0,"mat-card",0)(1,"h4")(2,"b"),m(3,"Sign Up"),o()(),a(4,"form",1),M("ngSubmit",function(){return i.onRegistration()}),a(5,"mat-form-field",2)(6,"mat-label"),m(7,"Email"),o(),u(8,"input",3),c(9,Y,2,1,"mat-error"),o(),a(10,"mat-form-field",2)(11,"mat-label"),m(12,"Password"),o(),u(13,"input",4),c(14,Z,2,1,"mat-error"),o(),a(15,"mat-form-field",2)(16,"mat-label"),m(17,"Repeat Password"),o(),u(18,"input",5),c(19,$,2,1,"mat-error"),o(),a(20,"mat-card-actions",6)(21,"button",7),m(22," Register "),o(),a(23,"a",8),m(24,"Sign In"),o()()()()),r&2&&(s(4),p("formGroup",i.registrationForm),s(5),f(i.registrationForm.get("email").invalid?9:-1),s(5),f(i.registrationForm.get("password").invalid?14:-1),s(5),f(i.registrationForm.get("confirmPassword").invalid?19:-1),s(2),p("disabled",i.registrationForm.invalid),s(2),p("routerLink",F(6,X,i.linkLogin)))},dependencies:[T,N,V,L,O,A,D,z,B,H,U,R,I,y,G,q],styles:[".card[_ngcontent-%COMP%]{width:450px;margin:40px auto;padding:20px;background-color:#f2f2f2;text-align:center}@media (max-width: 576px){.card[_ngcontent-%COMP%]{width:80%}}.card[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:0;justify-content:end;gap:5px;display:grid;grid-template-columns:repeat(2,1fr)}.card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:4px}"]});let t=n;return t})();export{Ct as RegistrationComponent};
