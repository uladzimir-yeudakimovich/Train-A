import{a as h}from"./chunk-VD6TYLA4.js";import{b as g}from"./chunk-DCFEK5NY.js";import{f as o}from"./chunk-7T747AWH.js";import{q as c,s as l}from"./chunk-Y6UWJUYI.js";import{da as s,ga as n,la as p,ma as a,ub as m}from"./chunk-XM6RWNSX.js";var S={headers:new c({"Content-Type":"application/json",SkipAuthorization:"true"})},H=(()=>{let t=class t{constructor(e){this.http=e,this.isLogin=m(!!localStorage.getItem("token")),this.orderStore=a(g),this.searchStore=a(h)}registration(e){return this.http.post(o.SignUp,e,S)}login(e){let{email:i}=e;return this.http.post(o.SignIn,e,S).pipe(s(({token:f})=>{localStorage.setItem("token",f),localStorage.setItem("username",i),this.isLogin.set(!0)}))}logout(){this.orderStore.clear(),this.searchStore.clear(),this.http.delete(o.Logout).pipe(s(()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userRole"),this.isLogin.set(!1)})).subscribe()}};t.\u0275fac=function(i){return new(i||t)(p(l))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();export{H as a};
