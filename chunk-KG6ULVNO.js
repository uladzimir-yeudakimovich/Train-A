import{a as Q}from"./chunk-HDV3YJ36.js";import{a as K}from"./chunk-EMU2OSP3.js";import{a as J}from"./chunk-75FKSBTX.js";import{a as j}from"./chunk-6UHIMEQZ.js";import{a as H}from"./chunk-IY4QER5N.js";import{a as U,b as B,g as z}from"./chunk-D3ZEJMDG.js";import"./chunk-VL46BEFP.js";import{a as G,e as q}from"./chunk-NDNJYYJX.js";import"./chunk-4T44NYJG.js";import"./chunk-EK67O6HC.js";import"./chunk-PZQC65FW.js";import"./chunk-F4STTNID.js";import{a as S,b as y}from"./chunk-EVOHVUKJ.js";import{a as v}from"./chunk-ZWL73D3D.js";import{E as T,f as R,g as I,l as V,n as E,p as L,q as O,r as k,t as C,u as N,w as A,y as D}from"./chunk-PQ4C2WEQ.js";import"./chunk-YQJCNX7A.js";import{Ab as c,Cb as p,Fa as P,Hb as f,Mb as a,Nb as o,Nc as b,Ob as u,Xb as M,Zb as g,fb as s,gb as d,jc as m,kc as h,oa as x,vc as _,wc as F}from"./chunk-MTQVXK5S.js";var W=(t,n)=>l=>{let e=l.get(t),r=l.get(n);if(r.errors&&!r.errors?.confirmedValidator)return null;if(e.value!==r.value){let i={confirmedValidator:"Passwords do not match"};return r.setErrors(i),i}return r.setErrors(null),null};var X=t=>["/",t];function Y(t,n){if(t&1&&(a(0,"mat-error"),m(1),o()),t&2){let l=g();s(),h(l.getEmailErrorMessage())}}function Z(t,n){if(t&1&&(a(0,"mat-error"),m(1),o()),t&2){let l=g();s(),h(l.getPasswordErrorMessage())}}function $(t,n){if(t&1&&(a(0,"mat-error"),m(1),o()),t&2){let l=g();s(),h(l.getConfirmPasswordErrorMessage())}}var Ct=(()=>{let n=class n{constructor(e,r,i,w){this.authService=e,this.router=r,this.destroyRef=i,this.cdr=w,this.linkLogin=v.Login,this.registrationForm=new k({email:new C("",[E.required,K()]),password:new C("",[E.required,Q(8,225)]),confirmPassword:new C("",[])},{validators:W("password","confirmPassword")})}onRegistration(){if(this.registrationForm.valid){let{email:e,password:r}=this.registrationForm.value;this.authService.registration({email:e,password:r}).pipe(J(this.destroyRef)).subscribe(()=>this.router.navigate([v.Login]),i=>{this.registrationForm.get("email")?.setErrors({alreadyExists:i.message}),this.cdr.detectChanges()})}else this.registrationForm.markAllAsTouched()}getEmailErrorMessage(){let e=this.registrationForm.get("email");return e.hasError("required")?"Please enter an email":e.hasError("invalidEmail")?"Incorrect email":e.hasError("email")?"The email is invalid":e.hasError("alreadyExists")?"Account with this email already exists":""}getPasswordErrorMessage(){let e=this.registrationForm.get("password");return e.hasError("required")?"Please enter a password":e.hasError("minlength")?"Password must be at least 8 characters long":""}getConfirmPasswordErrorMessage(){return this.registrationForm.get("confirmPassword").hasError("confirmedValidator")?"Passwords do not match":""}};n.\u0275fac=function(r){return new(r||n)(d(j),d(R),d(P),d(b))},n.\u0275cmp=x({type:n,selectors:[["app-registration"]],standalone:!0,features:[_],decls:25,vars:8,consts:[[1,"card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","placeholder","email","formControlName","email","name","email","type","email"],["matInput","","placeholder","password","formControlName","password","name","password","type","password"],["matInput","","placeholder","confirm password","formControlName","confirmPassword","name","confirmPassword","type","password"],[1,"card-actions"],["type","submit","mat-flat-button","",1,"btn",3,"disabled"],["mat-button","",1,"btn",3,"routerLink"]],template:function(r,i){r&1&&(a(0,"mat-card",0)(1,"h4")(2,"b"),m(3,"Sign Up"),o()(),a(4,"form",1),M("ngSubmit",function(){return i.onRegistration()}),a(5,"mat-form-field",2)(6,"mat-label"),m(7,"Email"),o(),u(8,"input",3),c(9,Y,2,1,"mat-error"),o(),a(10,"mat-form-field",2)(11,"mat-label"),m(12,"Password"),o(),u(13,"input",4),c(14,Z,2,1,"mat-error"),o(),a(15,"mat-form-field",2)(16,"mat-label"),m(17,"Repeat Password"),o(),u(18,"input",5),c(19,$,2,1,"mat-error"),o(),a(20,"mat-card-actions",6)(21,"button",7),m(22," Register "),o(),a(23,"a",8),m(24,"Sign In"),o()()()()),r&2&&(s(4),p("formGroup",i.registrationForm),s(5),f(i.registrationForm.get("email").invalid?9:-1),s(5),f(i.registrationForm.get("password").invalid?14:-1),s(5),f(i.registrationForm.get("confirmPassword").invalid?19:-1),s(2),p("disabled",i.registrationForm.invalid),s(2),p("routerLink",F(6,X,i.linkLogin)))},dependencies:[T,N,V,L,O,A,D,z,B,H,U,S,y,I,G,q],styles:[".card[_ngcontent-%COMP%]{width:450px;margin:40px auto;padding:20px;background-color:#f2f2f2;text-align:center}@media (max-width: 576px){.card[_ngcontent-%COMP%]{width:80%}}.card[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:0;justify-content:end;gap:5px;display:grid;grid-template-columns:repeat(2,1fr)}.card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:4px}"]});let t=n;return t})();export{Ct as RegistrationComponent};
