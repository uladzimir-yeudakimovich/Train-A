import{a as h}from"./chunk-YINHOYAG.js";import{i as $}from"./chunk-Y6UWJUYI.js";import{Ac as E,Ba as u,Ca as _,Db as z,Fb as b,Jb as R,Kb as w,Na as p,Nb as I,Oa as d,Ob as H,Pb as s,Qb as c,Rb as y,Vb as M,Vc as B,_b as g,ac as O,ga as D,gb as F,ib as a,jb as T,mc as m,nc as L,oc as P,ra as f,ub as k,uc as j,xc as V,yc as S}from"./chunk-XM6RWNSX.js";var K=(i,n)=>[i,n],N=(()=>{let n=class n{constructor(){this.seat=d.required(),this.direction=d.required(),this.select=p()}onSeatClick(){this.seat().state!==h.Reserved&&this.select.emit(this.seat().number)}get SeatState(){return h}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=f({type:n,selectors:[["app-car-seat"]],inputs:{seat:[1,"seat"],direction:[1,"direction"]},outputs:{select:"select"},standalone:!0,features:[S],decls:3,vars:6,consts:[[1,"seat",3,"click","ngClass","disabled"]],template:function(e,r){if(e&1){let o=M();j(0),s(1,"button",0),g("click",function(){return u(o),_(r.onSeatClick())}),m(2),c()}if(e&2){let o=r.seat().state;a(),b("ngClass",E(3,K,r.direction(),o))("disabled",o===r.SeatState.Reserved),a(),P(" ",r.seat().number,`
`)}},dependencies:[$],styles:['[_nghost-%COMP%]   .seat[_ngcontent-%COMP%]{position:relative;width:2rem;height:2rem;margin:10px;padding:0;border:0;border-radius:5px;font-size:1.1rem}[_nghost-%COMP%]   .seat.available[_ngcontent-%COMP%], [_nghost-%COMP%]   .seat.selected[_ngcontent-%COMP%]{color:#f2f2f2;cursor:pointer}[_nghost-%COMP%]   .seat[_ngcontent-%COMP%]:before{content:"";position:absolute;border:3px solid}[_nghost-%COMP%]   .seat.right[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .seat.left[_ngcontent-%COMP%]:before{top:-.25rem;bottom:-.25rem;width:1.25rem}[_nghost-%COMP%]   .seat.top[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .seat.bottom[_ngcontent-%COMP%]:before{left:-.25rem;right:-.25rem;height:1.25rem}[_nghost-%COMP%]   .seat.left[_ngcontent-%COMP%]:before{right:-.25rem;border-left:0;border-radius:0 7px 7px 0}[_nghost-%COMP%]   .seat.right[_ngcontent-%COMP%]:before{left:-.25rem;border-right:0;border-radius:7px 0 0 7px}[_nghost-%COMP%]   .seat.top[_ngcontent-%COMP%]:before{top:-.25rem;border-bottom:0;border-radius:7px 7px 0 0}[_nghost-%COMP%]   .seat.bottom[_ngcontent-%COMP%]:before{bottom:-.25rem;border-top:0;border-radius:0 0 7px 7px}[_nghost-%COMP%]   .available[_ngcontent-%COMP%]{background-color:#213786}[_nghost-%COMP%]   .available[_ngcontent-%COMP%]:before{border-color:#21378680}[_nghost-%COMP%]   .reserved[_ngcontent-%COMP%]{background-color:#d4d5d6}[_nghost-%COMP%]   .reserved[_ngcontent-%COMP%]:before{border-color:#d4d5d680}[_nghost-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#f09a27}[_nghost-%COMP%]   .selected[_ngcontent-%COMP%]:before{border-color:#f09a2780}'],changeDetection:0});let i=n;return i})();var x=(()=>{let n=class n{getAvailableSeatsNumber(t){return t.seats.filter(e=>e.state!==h.Reserved).length}getSeatDirection(t,e,r){let{leftSeats:o,rightSeats:C,rows:W}=t,v=o+C,A=e<=v,G=e>v*(W-1);if(A)return this.adjustDirectionForOrientation("right",r);if(G)return this.adjustDirectionForOrientation("left",r);let J=(e-1)%v<o;return this.adjustDirectionForOrientation(J?"left":"right",r)}isLastInRow(t,e,r){let o=t.leftSeats+t.rightSeats;return r?(e+1)%t.rows===0:(e+1)%o===0}isCorridor(t,e,r){let o=t.leftSeats+t.rightSeats;return r?e+1===t.rows*t.rightSeats:(e+1)%o===t.leftSeats}adjustDirectionForOrientation(t,e){return e?t:t==="left"?"bottom":"top"}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=D({token:n,factory:n.\u0275fac});let i=n;return i})();var U=(i,n)=>n.number;function X(i,n){i&1&&y(0,"br")}function Y(i,n){if(i&1&&y(0,"div"),i&2){let l=O(2);R("separator ",l.isHorizontal()?"":"inline","")}}function Z(i,n){if(i&1){let l=M();s(0,"app-car-seat",5),g("select",function(e){u(l);let r=O();return _(r.toggleSeatState(e))}),c(),z(1,X,1,0,"br")(2,Y,1,3,"div",6)}if(i&2){let l=n.$implicit,t=n.$index,e=O();b("seat",l)("direction",e.getSeatDirection(l.number)),a(),w(e.isLastInRow(t)?1:-1),a(),w(e.isCorridor(t)?2:-1)}}var mt=(()=>{let n=class n{constructor(t){this.trainCarService=t,this.carriage=d.required(),this.title=d(),this.toggleSeat=p(),this.updateCarriage=p(),this.isHorizontal=k(!1),this.seats=B(()=>{let e=this.carriage();return this.isHorizontal()?e.seats:[...e.seats].sort((r,o)=>r.number-o.number)})}ngOnInit(){this.isHorizontal.set(window.innerWidth>992)}onResize(){this.isHorizontal.set(window.innerWidth>992)}toggleSeatState(t){this.toggleSeat.emit(t)}getSeatDirection(t){return this.trainCarService.getSeatDirection(this.carriage(),t,this.isHorizontal())}isLastInRow(t){return this.trainCarService.isLastInRow(this.carriage(),t,this.isHorizontal())}isCorridor(t){return this.trainCarService.isCorridor(this.carriage(),t,this.isHorizontal())}get availableSeatsNumber(){return this.trainCarService.getAvailableSeatsNumber(this.carriage())}};n.\u0275fac=function(e){return new(e||n)(T(x))},n.\u0275cmp=f({type:n,selectors:[["app-train-car"]],hostBindings:function(e,r){e&1&&g("resize",function(C){return r.onResize(C)},!1,F)},inputs:{carriage:[1,"carriage"],title:[1,"title"]},outputs:{toggleSeat:"toggleSeat",updateCarriage:"updateCarriage"},standalone:!0,features:[V([x]),S],decls:9,vars:2,consts:[[1,"container"],[1,"head"],[1,"car-name"],[1,"available-number"],[1,"schema"],[3,"select","seat","direction"],[3,"class"]],template:function(e,r){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"span",2),m(3),c(),s(4,"span",3),m(5),c()(),s(6,"div",4),I(7,Z,3,4,null,null,U),c()()),e&2){let o;a(3),L((o=r.title())!==null&&o!==void 0?o:r.carriage().name),a(2),P("",r.availableSeatsNumber," seats"),a(2),H(r.seats())}},dependencies:[N],styles:['[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{padding-top:.2rem;margin:0 auto}[_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}[_nghost-%COMP%]   .separator.inline[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .car-name[_ngcontent-%COMP%]{font-weight:500;font-size:1.2rem;margin-right:10px}[_nghost-%COMP%]   .available-number[_ngcontent-%COMP%]{padding:5px 15px;border-radius:15px;border-width:1px;border-style:solid;border-color:#afafaf}[_nghost-%COMP%]   .schema[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-top:20px;border-radius:15px;border-width:1px;border-style:solid;border-color:#afafaf;padding:15px 100px}@media (max-width: 768px){[_nghost-%COMP%]   .schema[_ngcontent-%COMP%]{padding:15px 30px}}[_nghost-%COMP%]   .schema[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .schema[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;width:1px;background-color:#afafaf}[_nghost-%COMP%]   .schema[_ngcontent-%COMP%]:before{left:50px;top:20px;bottom:20px}@media (max-width: 768px){[_nghost-%COMP%]   .schema[_ngcontent-%COMP%]:before{left:15px}}[_nghost-%COMP%]   .schema[_ngcontent-%COMP%]:after{right:50px;top:20px;bottom:20px}@media (max-width: 768px){[_nghost-%COMP%]   .schema[_ngcontent-%COMP%]:after{right:15px}}'],changeDetection:0});let i=n;return i})();export{N as a,x as b,mt as c};
