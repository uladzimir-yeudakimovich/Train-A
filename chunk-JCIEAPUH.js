import{a as W}from"./chunk-HDV3YJ36.js";import{a as Q}from"./chunk-EMU2OSP3.js";import{a as S}from"./chunk-75FKSBTX.js";import{a as T}from"./chunk-6UHIMEQZ.js";import{a as K}from"./chunk-IY4QER5N.js";import{a as B,b as H,g as J}from"./chunk-D3ZEJMDG.js";import"./chunk-VL46BEFP.js";import{a as U,e as z}from"./chunk-NDNJYYJX.js";import"./chunk-4T44NYJG.js";import"./chunk-EK67O6HC.js";import{i as A}from"./chunk-PZQC65FW.js";import"./chunk-F4STTNID.js";import{a as I,b as P}from"./chunk-EVOHVUKJ.js";import{a as c}from"./chunk-ZWL73D3D.js";import{E as q,f as R,g as O,l as L,n as v,p as k,q as D,r as N,t as E,u as j,w as G,y as V}from"./chunk-PQ4C2WEQ.js";import"./chunk-YQJCNX7A.js";import{Ab as u,Cb as d,Fa as w,Hb as g,Mb as r,Nb as i,Nc as y,Ob as f,Xb as M,Zb as h,fb as a,gb as l,jc as s,lc as C,oa as b,vc as _,wc as F}from"./chunk-MTQVXK5S.js";var Y=e=>["/",e];function Z(e,o){if(e&1&&(r(0,"mat-error"),s(1),i()),e&2){let p=h();a(),C(" ",p.getEmailErrorMessage()," ")}}function $(e,o){if(e&1&&(r(0,"mat-error"),s(1),i()),e&2){let p=h();a(),C(" ",p.getPasswordErrorMessage()," ")}}var ht=(()=>{let o=class o{constructor(t,m,n,x,X){this.router=t,this.authService=m,this.cdr=n,this.destroyRef=x,this.profileService=X,this.linkRegistration=c.Registration,this.loginForm=new N({email:new E("",[v.required,Q]),password:new E("",[v.required,W(8,225)])})}ngOnInit(){this.authService.isLogin()&&this.router.navigate([c.Search])}getEmailErrorMessage(){let t=this.loginForm.get("email");return t.hasError("required")?"Please enter a email":t.hasError("email")?"Incorrect email":t.hasError("notExists")?"Incorrect email or password":""}getPasswordErrorMessage(){let t=this.loginForm.get("password");return t.hasError("required")?"Please enter a password":t.hasError("minlength")?"Password must be at least 8 characters long":t.hasError("notExists")?"Incorrect email or password":""}onSubmit(){this.authService.login(this.loginForm.value).pipe(S(this.destroyRef)).subscribe({next:()=>{this.profileService.getUserInformation().pipe(S(this.destroyRef)).subscribe({next:()=>this.router.navigate([c.Search])})},error:()=>{this.loginForm.get("email")?.setErrors({notExists:!0}),this.loginForm.get("password")?.setErrors({notExists:!0}),this.cdr.detectChanges()}})}};o.\u0275fac=function(m){return new(m||o)(l(R),l(T),l(y),l(w),l(A))},o.\u0275cmp=b({type:o,selectors:[["app-login"]],standalone:!0,features:[_],decls:20,vars:7,consts:[[1,"card"],[3,"ngSubmit","formGroup"],["subscriptSizing","dynamic","appearance","outline",1,"form-field"],["matInput","","formControlName","email","name","email","type","email"],["matInput","","formControlName","password","name","password","type","password"],[1,"card-actions"],["type","submit","mat-flat-button","",1,"btn",3,"disabled"],["mat-button","",1,"btn",3,"routerLink"]],template:function(m,n){m&1&&(r(0,"mat-card",0)(1,"h4")(2,"b"),s(3,"Sign In"),i()(),r(4,"form",1),M("ngSubmit",function(){return n.onSubmit()}),r(5,"mat-form-field",2)(6,"mat-label"),s(7,"Email"),i(),f(8,"input",3),u(9,Z,2,1,"mat-error"),i(),r(10,"mat-form-field",2)(11,"mat-label"),s(12,"Password"),i(),f(13,"input",4),u(14,$,2,1,"mat-error"),i(),r(15,"mat-card-actions",5)(16,"button",6),s(17," Sign In "),i(),r(18,"a",7),s(19,"Sign Up"),i()()()()),m&2&&(a(4),d("formGroup",n.loginForm),a(5),g(n.loginForm.get("email").invalid?9:-1),a(5),g(n.loginForm.get("password").invalid?14:-1),a(2),d("disabled",n.loginForm.invalid),a(2),d("routerLink",F(5,Y,n.linkRegistration)))},dependencies:[q,j,L,k,D,G,V,J,H,K,B,I,P,O,U,z],styles:[".card[_ngcontent-%COMP%]{width:450px;margin:40px auto;padding:20px;background-color:#f2f2f2;text-align:center}@media (max-width: 576px){.card[_ngcontent-%COMP%]{width:80%}}.card[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:0;justify-content:end;gap:5px;display:grid;grid-template-columns:repeat(2,1fr)}.card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:4px}"]});let e=o;return e})();export{ht as LoginComponent};
